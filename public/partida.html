<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/partida.css">
    <script src="js/auth.js"></script>
    <script src="js/partida.js" defer></script>
    <title>La Taberna del Aventurero</title>
</head>
<body>
<!-- Part√≠culas ambientales -->
<div class="ambient-particles"></div>

<!-- Header principal -->
<header class="tavern-header">
    <div class="header-container">
        <!-- Logo de la taberna -->
        <div class="tavern-logo">
            <div class="logo-frame">
                <h1 class="tavern-name">LA TABERNA DEL AVENTURERO</h1>
                <div class="logo-decoration"></div>
            </div>
        </div>

        <!-- Perfil de usuario -->
        <div class="user-profile" id="userProfile">
            <div class="profile-avatar">
                <img src="img/avatar1.png" alt="Avatar" class="avatar-image">
                <div class="level-indicator">Lv.1</div>
            </div>
            <div class="profile-details">
                <div class="username" id="username-display">Cargando...</div>
                <div class="badges-info">
                    <span class="badge-icon">üèÜ</span>
                    <span id="insignia-count">0</span> Insignias
                </div>
            </div>
            <div class="profile-expand">‚ñº</div>
        </div>
    </div>
</header>

<!-- Panel desplegable de perfil -->
<div class="profile-dropdown" id="profilePanel">
    <div class="dropdown-header">
        <h3>Perfil del Aventurero</h3>
        <button class="close-btn" id="closePanel">√ó</button>
    </div>
    <div class="dropdown-content">
        <div class="hero-info">
            <img src="img/avatar1.png" alt="Avatar" class="hero-portrait">
            <div class="hero-details">
                <h4 class="hero-name" id="heroName">Cargando...</h4>
                <p class="hero-title">Aventurero Novato</p>
            </div>
        </div>

        <div class="achievements-section">
            <h5>Logros Conseguidos</h5>
            <div class="achievements-grid" id="insigniasGrid">
                <!-- Se llenar√° din√°micamente -->
            </div>
            <div class="achievements-total">
                Progreso: <span id="totalInsignias">0</span> / 3
            </div>
        </div>
    </div>
</div>

<!-- Contenido principal -->
<main class="main-content">
    <!-- Panel de misiones -->
    <div class="mission-board">
        <div class="board-header">
            <h2 class="board-title">TABLA DE PARTIDAS</h2>
            <div class="board-pins">
                <div class="pin pin-1"></div>
                <div class="pin pin-2"></div>
                <div class="pin pin-3"></div>
                <div class="pin pin-4"></div>
            </div>
        </div>

        <!-- Contenedor de partidas -->
        <div class="missions-grid" id="contenedor-partidas">
            <!-- Las partidas se cargar√°n aqu√≠ -->
        </div>

        <!-- Botones de acci√≥n -->
        <div class="board-actions">
            <button class="action-btn btn-primary" id="crear">
                <span class="btn-icon">‚öî</span>
                <span class="btn-text">NUEVA AVENTURA</span>
            </button>
            <button class="action-btn btn-secondary" id="volver">
                <span class="btn-icon">üö™</span>
                <span class="btn-text">ABANDONAR TABERNA</span>
            </button>
        </div>
    </div>
</main>

<!-- Decoraciones de ambiente -->
<div class="tavern-atmosphere">
    <!-- Antorchas -->
    <div class="torch torch-left">
        <div class="flame"></div>
    </div>
    <div class="torch torch-right">
        <div class="flame"></div>
    </div>

    <!-- Barman animado -->
    <div class="barman-corner">
        <img src="img/gif.bar.gif" alt="Barman" class="barman-sprite">
        <div class="counter-shadow"></div>
    </div>
</div>

<!-- Sistema de notificaciones -->
<div class="notification-system" id="notificationSystem">
    <div class="notification-icon"></div>
    <div class="notification-message" id="notificationText"></div>
</div>

<!-- Modal de confirmaci√≥n mejorado -->
<div class="confirmation-modal" id="confirmationModal">
    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="modal-panel">
        <div class="modal-header">
            <h3 class="modal-title" id="modalTitle">‚ö† Confirmar Acci√≥n</h3>
        </div>
        <div class="modal-body">
            <p class="modal-message" id="modalMessage"></p>
            <div class="confirmation-input" id="confirmationInput">
                <label class="input-label">Escribe "BORRAR" para confirmar:</label>
                <input type="text" class="confirm-text" id="confirmText" placeholder="BORRAR" maxlength="6">
                <p class="warning-text">‚ö† Esta acci√≥n no se puede deshacer</p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-btn btn-danger" id="confirmAction" disabled>CONFIRMAR</button>
            <button class="modal-btn btn-cancel" id="cancelAction">CANCELAR</button>
        </div>
    </div>
</div>

<!-- Pantalla de carga -->
<div class="loading-overlay" id="spinner">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <p class="loading-text">Preparando aventuras...</p>
        <div class="loading-progress">
            <div class="progress-bar"></div>
        </div>
    </div>
</div>


<!-- Efectos flotantes de la taberna -->
<div class="tavern-floating-effects">
    <!-- Humo de las antorchas -->
    <div class="smoke-effect smoke-1"></div>
    <div class="smoke-effect smoke-2"></div>
    <div class="smoke-effect smoke-3"></div>
    <div class="smoke-effect smoke-4"></div>

    <!-- Chispas/brasas de las antorchas -->
    <div class="ember ember-1"></div>
    <div class="ember ember-2"></div>
    <div class="ember ember-3"></div>
    <div class="ember ember-4"></div>
    <div class="ember ember-5"></div>
    <div class="ember ember-6"></div>

    <!-- Polvo m√°gico dorado -->
    <div class="magic-dust dust-1"></div>
    <div class="magic-dust dust-2"></div>
    <div class="magic-dust dust-3"></div>
    <div class="magic-dust dust-4"></div>
    <div class="magic-dust dust-5"></div>


</div>

<!-- A√±adir este HTML al final del body en partida.html, justo antes de </body> -->

<!-- Modal para mostrar ID de partida -->
<div class="id-modal" id="idModal">
    <div class="id-modal-overlay" id="idModalOverlay"></div>
    <div class="id-modal-content">
        <div class="id-modal-header">
            <h3 class="id-modal-title">üìú Identificador de Aventura</h3>
            <button class="id-modal-close" id="idModalClose">√ó</button>
        </div>
        <div class="id-modal-body">
            <div class="id-display">
                <label class="id-label">ID de Partida:</label>
                <div class="id-value" id="idModalValue"><!-- Se llenar√° din√°micamente --></div>
                <button class="id-copy-btn" id="idCopyBtn">üìã Copiar ID</button>
            </div>
        </div>
        <div class="id-modal-footer">
            <p class="id-modal-note">Usa este ID para identificar tu aventura espec√≠fica</p>
        </div>
    </div>
</div>


</body>
</html>